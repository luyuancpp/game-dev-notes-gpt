# 实现5秒无伤后每秒回复生命值的 Buff

该文档展示了如何实现一个在过去5秒内未受到伤害或敌方英雄技能命中时，每秒回复自身一定比例已损失生命值的 **Buff**。该机制可以用于类似 MOBA 游戏的角色技能或被动效果。

## 1. 关键逻辑步骤

1. **检测伤害和技能命中**：每当英雄受到伤害或被敌方技能命中时，重置一个计时器记录该事件。
2. **条件满足时启动生命恢复**：当计时器超过5秒，且期间没有受到任何伤害或技能命中时，启动每秒的生命恢复。
3. **基于损失生命值进行回复**：每秒恢复1.3%（或随等级成长的数值）的已损失生命值。

## 2. 实现步骤

### a) 定义基础变量

```python
lastHitTime = 0  # 最近一次受到伤害的时间
buffActive = False  # 是否激活生命恢复Buff
timeSinceLastHit = 0  # 从最近一次受伤到当前的时间差
healPerSecond = 1.3 / 100  # 每秒恢复的已损失生命值百分比


### b) 受到伤害或技能命中时的处理逻辑

每当英雄受到伤害或敌方技能命中时，重置 lastHitTime。